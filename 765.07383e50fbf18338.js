"use strict";(self.webpackChunkng_p5js_sketches=self.webpackChunkng_p5js_sketches||[]).push([[765],{5765:(R,c,o)=>{o.r(c),o.d(c,{FlowField1Module:()=>z});var u=o(9808),f=o(2271),g=o(8555),F=o(7755),m=o(6505),a=o(1081),P=o(5961),v=o(2215),d=o(8185),y=o(3396),w=o(6046),B=o(9910);const r=new a.NA("Pause"),l=new a.NA("Draw Once"),n={title:"Flow Field 1",width:1e3,height:1e3,isSvg:!1,controls:{refreshButton:!0,downloadButton:!0,customControls:[r,l]},func:s=>{let e,t=!0;function h(){e.step(),e.draw(),console.log("Frame rate: "+s.frameRate())}s.setup=()=>{(0,P.$)(s,{width:n.width,height:n.height,useSvg:n.isSvg}),s.background(v.y),s.stroke(d.n,48),s.noFill(),s.blendMode(s.SCREEN),s.noiseSeed(s.random(0,1e4)),l.onPress=()=>{h()},r.onPress=()=>{t=!t,r.label$.next(t?"Pause":"Run")},e=new x(s)},s.draw=()=>{t&&h()}}};class x{constructor(t){this.p5=t,this.forceXGridSize=50,this.forceYGridSize=50,this.forcePerlinXFactor=.005,this.forcePerlinYFactor=.005,this.drawForces=!1,this.initialParticleCount=5,this.maxParticleCount=100,this.particleIncrementAmount=1,this.particleIncreaseTimeout=250,this.forces=[],this.particles=[],this.initializeForces(),this.initializeParticles(this.initialParticleCount);const i=setInterval(()=>{this.particles.length<this.maxParticleCount?this.initializeParticles(this.particleIncrementAmount):(console.log("ending interval"),clearInterval(i))},this.particleIncreaseTimeout)}get forceColCount(){return this.p5.width/this.forceXGridSize}get forceRowCount(){return this.p5.height/this.forceYGridSize}initializeForces(){for(let t=-2;t<=this.forceColCount+2;t++)for(let i=-2;i<=this.forceRowCount+2;i++){const e=t*this.forceXGridSize,h=i*this.forceYGridSize;this.forces.push(new C(this.p5,e,h,this.p5.noise(e*this.forcePerlinXFactor,h*this.forcePerlinYFactor)*this.p5.TWO_PI-this.p5.HALF_PI))}}initializeParticles(t){console.log(`Adding ${t} particles`);for(let i=0;i<t;i++)this.particles.push(new S(this.p5))}draw(){this.drawForces&&this.forces.forEach(t=>t.draw()),this.particles.forEach(t=>t.draw())}step(){this.particles.forEach(t=>{this.forces.forEach(i=>{t.applyForce(i.force,(0,y.T)(i.position,t.position))})}),this.particles.forEach(t=>t.step())}}class C{constructor(t,i,e,h){this.p5=t,this.force=m.Vector.fromAngle(h),this.position=this.p5.createVector(i,e)}draw(){this.p5.push(),this.p5.stroke(d.n),this.p5.translate(this.position.x,this.position.y),this.p5.rotate(this.force.heading()),this.p5.line(0,0,10,0),this.p5.translate(-5,0),this.p5.circle(0,0,3),this.p5.pop()}}class S{constructor(t){this.p5=t,this.maxSpeed=1,this.minSpeed=.5,this.loopParticles=!1,this.initKinematics()}get xBoundFudgeFactor(){return this.p5.width/8}get yBoundFudgeFactor(){return this.p5.height/8}initKinematics(){this.initPosRandom(),this.velocity=this.p5.createVector(0,0),this.acceleration=this.p5.createVector(0,0),this.previousPosition=this.position.copy()}initPosRandom(){this.position=this.p5.createVector(this.p5.random(0,this.p5.width),this.p5.random(0,this.p5.height))}initPosRightEdge(){this.position=this.p5.createVector(this.p5.width,this.p5.random(0,this.p5.height))}initPosRandomTopEdge(){this.position=this.p5.createVector(this.p5.random(0,this.p5.width),0)}initPosGuassianTopEdge(){const t=this.p5.width/2;this.position=this.p5.createVector(this.p5.randomGaussian(t,t/2),-1)}initPosCenterRect(){const t=this.p5.width/2,i=this.p5.height/2;this.position=this.p5.createVector(this.p5.random(t-100,t+100),this.p5.random(i-100,i+100))}draw(){(0,w.j)(this.p5,this.previousPosition,this.position)}step(){this.previousPosition=this.position.copy(),this.velocity.add(this.acceleration),(0,B.d)(this.velocity,this.minSpeed,this.maxSpeed),this.position.add(this.velocity),this.acceleration.mult(0),this.loopParticles?this.checkBoundsLoop():this.checkBoundsRandom()}applyForce(t,i){i<=5&&(i=1),this.acceleration.add(t.copy().div(i*i))}checkBoundsRandom(){(this.position.x<-this.xBoundFudgeFactor||this.position.x>this.p5.width+this.xBoundFudgeFactor||this.position.y<-this.yBoundFudgeFactor||this.position.y>this.p5.height+this.yBoundFudgeFactor)&&this.initKinematics()}checkBoundsLoop(){this.position.x<-this.xBoundFudgeFactor&&(this.position.x=this.p5.width,this.previousPosition=this.position.copy()),this.position.x>this.p5.width+this.xBoundFudgeFactor&&(this.position.x=0,this.previousPosition=this.position.copy()),this.position.y<-this.yBoundFudgeFactor&&(this.position.y=this.p5.height,this.previousPosition=this.position.copy()),this.position.y>this.p5.height+this.yBoundFudgeFactor&&(this.position.y=0,this.previousPosition=this.position.copy())}}var p=o(5e3);let z=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=p.oAB({type:s}),s.\u0275inj=p.cJS({imports:[[u.ez,f.m,g.Bz.forChild([{path:"",component:F.k,data:n}])]]}),s})()}}]);